[
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_MODULE[cipd]/resources/bootstrap.py",
      "--platform",
      "linux-amd64",
      "--dest-directory",
      "[SLAVE_BUILD]/cipd",
      "--json-output",
      "/path/to/tmp/json"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "install cipd",
    "~followup_annotations": [
      "@@@STEP_TEXT@cipd instance_id: 40-chars-fake-of-the-package-instance_id@@@",
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"executable\": \"[SLAVE_BUILD]/cipd/cipd\", @@@",
      "@@@STEP_LOG_LINE@json.output@  \"instance_id\": \"40-chars-fake-of-the-package-instance_id\"@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "python",
      "-u",
      "RECIPE_MODULE[cipd]/resources/bootstrap.py",
      "--platform",
      "linux-amd64",
      "--dest-directory",
      "[SLAVE_BUILD]/cipd",
      "--json-output",
      "/path/to/tmp/json",
      "--version",
      "deadbeaf"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "install cipd (2)",
    "~followup_annotations": [
      "@@@STEP_TEXT@cipd instance_id: resolved-instance_id-of-deadbeaf--------@@@",
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"executable\": \"[SLAVE_BUILD]/cipd/cipd\", @@@",
      "@@@STEP_LOG_LINE@json.output@  \"instance_id\": \"resolved-instance_id-of-deadbeaf--------\"@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/cipd/cipd",
      "ensure",
      "--root",
      "[SLAVE_BUILD]/packages",
      "--list",
      "infra/monitoring/dispatcher/linux-amd64 7f751b2237df2fdf3c1405be00590fefffbaea2d",
      "--json-output",
      "/path/to/tmp/json"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "ensure_installed",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"result\": [@@@",
      "@@@STEP_LOG_LINE@json.output@    {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"instance_id\": \"7f751b2237df2fdf3c1405be00590fefffbaea2d\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"package\": \"infra/monitoring/dispatcher/linux-amd64\"@@@",
      "@@@STEP_LOG_LINE@json.output@    }@@@",
      "@@@STEP_LOG_LINE@json.output@  ]@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/cipd/cipd",
      "ensure",
      "--root",
      "[SLAVE_BUILD]/packages",
      "--list",
      "infra/monitoring/dispatcher/linux-amd64 7f751b2237df2fdf3c1405be00590fefffbaea2d\nprivate/package/linux-amd64 latest",
      "--json-output",
      "/path/to/tmp/json",
      "--service-account-json",
      "fake-credentials.json"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "ensure_installed (2)",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"result\": [@@@",
      "@@@STEP_LOG_LINE@json.output@    {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"instance_id\": \"7f751b2237df2fdf3c1405be00590fefffbaea2d\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"package\": \"infra/monitoring/dispatcher/linux-amd64\"@@@",
      "@@@STEP_LOG_LINE@json.output@    }, @@@",
      "@@@STEP_LOG_LINE@json.output@    {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"instance_id\": \"resolved-instance_id-of-latest----------\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"package\": \"private/package/linux-amd64\"@@@",
      "@@@STEP_LOG_LINE@json.output@    }@@@",
      "@@@STEP_LOG_LINE@json.output@  ]@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/cipd/cipd",
      "pkg-build",
      "--in",
      "fake-input-dir",
      "--name",
      "infra/fake-package",
      "--out",
      "fake-package-path",
      "--json-output",
      "/path/to/tmp/json"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "build fake-package",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"result\": {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"instance_id\": \"40-chars-fake-of-the-package-instance_id\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"package\": \"infra/fake-package\"@@@",
      "@@@STEP_LOG_LINE@json.output@  }@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/cipd/cipd",
      "pkg-build",
      "--in",
      "fake-input-dir",
      "--name",
      "infra/fake-package",
      "--out",
      "fake-package-path",
      "--json-output",
      "/path/to/tmp/json",
      "--install-mode",
      "copy"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "build fake-package (2)",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"result\": {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"instance_id\": \"40-chars-fake-of-the-package-instance_id\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"package\": \"infra/fake-package\"@@@",
      "@@@STEP_LOG_LINE@json.output@  }@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/cipd/cipd",
      "pkg-register",
      "fake-package-path",
      "--service-account-json",
      "fake-credentials.json",
      "--json-output",
      "/path/to/tmp/json",
      "--ref",
      "fake-ref-1",
      "--ref",
      "fake-ref-2",
      "--tag",
      "fake_tag_1:fake_value_1",
      "--tag",
      "fake_tag_2:fake_value_2"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "register infra/fake-package",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"result\": {@@@",
      "@@@STEP_LOG_LINE@json.output@    \"instance_id\": \"40-chars-fake-of-the-package-instance_id\", @@@",
      "@@@STEP_LOG_LINE@json.output@    \"package\": \"infra/fake-package\"@@@",
      "@@@STEP_LOG_LINE@json.output@  }@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/cipd/cipd",
      "set-tag",
      "fake-package",
      "--version",
      "long/weird/ref/which/doesn/not/fit/into/40chars",
      "--service-account-json",
      "fake-credentials.json",
      "--json-output",
      "/path/to/tmp/json",
      "--tag",
      "dead:beaf",
      "--tag",
      "more:value"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "cipd set-tag fake-package",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"result\": [@@@",
      "@@@STEP_LOG_LINE@json.output@    {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"package\": \"fake-package\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"pin\": {@@@",
      "@@@STEP_LOG_LINE@json.output@        \"instance_id\": \"resolved-instance_id-of-long/weird/ref/w\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"package\": \"fake-package\"@@@",
      "@@@STEP_LOG_LINE@json.output@      }@@@",
      "@@@STEP_LOG_LINE@json.output@    }@@@",
      "@@@STEP_LOG_LINE@json.output@  ]@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "cmd": [
      "[SLAVE_BUILD]/cipd/cipd",
      "set-ref",
      "fake-package",
      "--version",
      "latest",
      "--service-account-json",
      "fake-credentials.json",
      "--json-output",
      "/path/to/tmp/json",
      "--ref",
      "any",
      "--ref",
      "ref"
    ],
    "cwd": "[SLAVE_BUILD]",
    "name": "cipd set-ref fake-package",
    "~followup_annotations": [
      "@@@STEP_LOG_LINE@json.output@{@@@",
      "@@@STEP_LOG_LINE@json.output@  \"result\": [@@@",
      "@@@STEP_LOG_LINE@json.output@    {@@@",
      "@@@STEP_LOG_LINE@json.output@      \"package\": \"fake-package\", @@@",
      "@@@STEP_LOG_LINE@json.output@      \"pin\": {@@@",
      "@@@STEP_LOG_LINE@json.output@        \"instance_id\": \"resolved-instance_id-of-latest----------\", @@@",
      "@@@STEP_LOG_LINE@json.output@        \"package\": \"fake-package\"@@@",
      "@@@STEP_LOG_LINE@json.output@      }@@@",
      "@@@STEP_LOG_LINE@json.output@    }@@@",
      "@@@STEP_LOG_LINE@json.output@  ]@@@",
      "@@@STEP_LOG_LINE@json.output@}@@@",
      "@@@STEP_LOG_END@json.output@@@"
    ]
  },
  {
    "name": "$result",
    "recipe_result": null,
    "status_code": 0
  }
]